"use strict";(self.webpackChunkboom_arena=self.webpackChunkboom_arena||[]).push([[815],{7815:(e,s,l)=>{l.r(s),l.d(s,{default:()=>I});var i,a=l(3722),n=l(6160),r=l(1686),t=l(9800),d=l(1645),c=l(8354),o=l(5043),x=l(1857),m=l(7528);const p=l(4905).Ay.div(i||(i=(0,m.A)(["\n  padding-top: 24px;\n\n  .ant-divider-horizontal {\n    margin: 0;\n  }\n\n  .flex {\n    display: flex;\n    align-items: center;\n  }\n\n  .ant-upload {\n    width: 100%;\n  }\n"])));var u=l(9748),h=l(8457),j=l(7473),f=l(3492),v=l(117),g=l(1956),A=l(3922),b=l(9790),w=l(6854),N=l(9724);const F={uploadFile:e=>w.A.post(N.mC,e,{headers:{"Content-Type":"multipart/form-data"}})};var y=l(6328),C=l(579);const P=function(){const[e]=u.A.useForm(),s=(0,o.useRef)(),[l,i]=(0,o.useState)(!1),[a,n]=(0,o.useState)(""),[x,m]=(0,o.useState)(!1),[p,w]=(0,o.useState)(!1),[N,P]=(0,o.useState)({}),[k,S]=(0,o.useState)("/image/cover_image.png"),[_,I]=(0,o.useState)([]),[O,q]=(0,o.useState)(!1),[M,E]=(0,o.useState)(!0),L=()=>{q(!0),b.A.getMe().then((s=>{if(s.isOk){const l=s.data;e.setFieldsValue({referalID:l.referral_code,fullname:l.fullname,email:l.username,description:l.description}),null!==l&&void 0!==l&&l.profile_img&&I([{url:"https://api.boomarena.1bitlab.io/api/v1/files/download?fileName="+(null===l||void 0===l?void 0:l.profile_img)}]),null!==l&&void 0!==l&&l.cover_img&&S("https://api.boomarena.1bitlab.io/api/v1/files/download?fileName="+(null===l||void 0===l?void 0:l.cover_img))}})).catch((()=>{})).finally((()=>q(!1)))};return(0,o.useEffect)((()=>{L()}),[]),(0,C.jsx)(r.A,{spinning:O,children:(0,C.jsxs)("div",{className:"border-[1px] border-solid border-[#d9d9d9]",children:[(0,C.jsxs)("div",{className:"flex justify-between px-[26px] py-7",children:[(0,C.jsx)("div",{className:"font-semibold",children:"My Profile"}),(0,C.jsxs)("div",{className:"flex cursor-pointer",onClick:()=>E(!1),children:[(0,C.jsx)(v.A,{name:"icon-pencil"}),"Edit Profile"]})]}),(0,C.jsx)(c.A,{}),(0,C.jsxs)("div",{className:"px-[26px] pt-6",children:[(0,C.jsxs)("div",{className:"group relative mb-6",children:[(0,C.jsx)("img",{src:k,alt:"",className:"h-[200px] w-full"}),(0,C.jsxs)("label",{className:"absolute left-0 top-0  flex h-[200px] w-full cursor-pointer items-center justify-center",children:[(0,C.jsxs)("div",{className:"hidden text-white group-hover:block",children:[(0,C.jsx)(v.A,{name:"icon-image"}),"Upload"]}),(0,C.jsx)("input",{disabled:M,hidden:!0,ref:s,type:"file",id:"avatar",accept:"image/*",onChange:()=>{const e=s.current.files[0],l=URL.createObjectURL(e);if((null===e||void 0===e?void 0:e.size)>5242880)return y.o.error("K\xedch th\u01b0\u1edbc \u1ea3nh qu\xe1 l\u1edbn");w(!0),S(l),P(e)}})]})]}),(0,C.jsx)(u.A,{form:e,colon:!1,labelCol:{span:6},labelAlign:"left",children:(0,C.jsxs)(t.A,{children:[(0,C.jsxs)(d.A,{span:16,children:[(0,C.jsx)(u.A.Item,{name:"referalID",label:"Referal ID",children:(0,C.jsx)(h.A,{disabled:M})}),(0,C.jsx)(u.A.Item,{name:"fullname",label:"Game name",children:(0,C.jsx)(h.A,{disabled:M})}),(0,C.jsx)(u.A.Item,{name:"email",label:"Email",children:(0,C.jsx)(h.A,{disabled:M})}),(0,C.jsx)(u.A.Item,{name:"description",label:"Description",children:(0,C.jsx)(h.A.TextArea,{disabled:M})}),(0,C.jsx)(u.A.Item,{label:" ",children:(0,C.jsx)(A.A,{disabled:M,onClick:async()=>{var s,l;const i=e.getFieldsValue();let a=null,n=null;var r;(q(!0),_.length&&x)&&(a=await F.uploadFile({file:null===(r=_[0])||void 0===r?void 0:r.originFileObj}));N&&p&&(n=await F.uploadFile({file:N}));const t={description:i.description,fullname:i.fullname,...(null===(s=a)||void 0===s?void 0:s.isOk)&&{profile_img:a.data.file_name},...(null===(l=n)||void 0===l?void 0:l.isOk)&&{cover_img:n.data.file_name}},d=await b.A.updateUser(t);null!==d&&void 0!==d&&d.isOk&&(y.o.success("Success"),L()),q(!1)},children:"Save"})})]}),(0,C.jsxs)(d.A,{span:8,className:"flex flex-col justify-center",children:[(0,C.jsx)(u.A.Item,{name:"avatar",label:"",children:(0,C.jsx)(j.A,{accept:"image/png, image/jpeg",maxCount:1,multiple:!1,disabled:M,listType:"picture-circle",fileList:_,onChange:e=>{let{fileList:s}=e;m(!0),I(s)},onPreview:async e=>{e.url||e.preview||(e.preview=await(0,g.In)(e.originFileObj)),n(e.url||e.preview),i(!0)},beforeUpload:e=>(I([..._,e]),!1),children:_.length<1&&"Avatar"})}),_.length<1&&(0,C.jsx)("div",{children:"Maximum capacity 5 MB"}),_.length<1&&(0,C.jsx)("div",{children:"Format: .JPEG, .PNG"})]})]})})]}),a&&(0,C.jsx)(f.A,{wrapperStyle:{display:"none"},preview:{visible:l,onVisibleChange:e=>i(e),afterOpenChange:e=>!e&&n("")},src:a})]})})},k=()=>{const[e]=u.A.useForm(),[s,l]=(0,o.useState)(!1);return(0,C.jsxs)("div",{className:"border-[1px] border-solid border-[#d9d9d9]",children:[(0,C.jsx)("div",{className:"flex justify-between px-[26px] py-7",children:(0,C.jsx)("div",{className:"font-semibold",children:"Change Password"})}),(0,C.jsx)(c.A,{}),(0,C.jsx)(r.A,{spinning:s,children:(0,C.jsx)("div",{className:"px-[26px] pt-6",children:(0,C.jsx)(u.A,{form:e,colon:!1,labelCol:{span:6},labelAlign:"left",requiredMark:!1,children:(0,C.jsx)(t.A,{children:(0,C.jsxs)(d.A,{span:20,children:[(0,C.jsx)(u.A.Item,{label:"Recent Password",name:"password",rules:[{required:!0,message:"required"}],children:(0,C.jsx)(h.A.Password,{})}),(0,C.jsx)(u.A.Item,{label:"New Password",name:"newPassword",rules:[{required:!0,message:"required"}],children:(0,C.jsx)(h.A.Password,{})}),(0,C.jsx)(u.A.Item,{label:"Confirm New Password",name:"confirmPass",rules:[{required:!0,message:"required"},e=>{let{getFieldValue:s}=e;return{validator:(e,l)=>l&&s("newPassword")!==l?Promise.reject(new Error("M\u1eadt kh\u1ea9u kh\xf4ng kh\u1edbp")):Promise.resolve()}}],children:(0,C.jsx)(h.A.Password,{})}),(0,C.jsx)(u.A.Item,{label:" ",children:(0,C.jsx)(A.A,{onClick:()=>{e.validateFields().then((s=>{l(!0);const i={curr_password:s.password,new_password:s.newPassword};b.A.changePassword(i).then((s=>{s.isOk&&(e.resetFields(),y.o.success("Success"))})).catch((()=>{})).finally((()=>l(!1)))})).catch((()=>{}))},children:"Save"})})]})})})})})]})};var S=l(9887),_=l(3216);const I=function(){const e=(0,_.Zp)(),[s,l]=(0,o.useState)(1),[i,m]=(0,o.useState)(!1);return(0,C.jsx)(p,{children:(0,C.jsx)(r.A,{spinning:i,children:(0,C.jsxs)(x.c,{children:[(0,C.jsxs)("div",{className:"mb-6 flex h-[100px] justify-between bg-[#FFF7E6] px-6",children:[(0,C.jsx)("div",{className:" text-xl font-semibold",children:"Profile"}),(0,C.jsx)("img",{src:"./image/play_earn.png",alt:"",height:90})]}),(0,C.jsxs)(t.A,{gutter:32,children:[(0,C.jsx)(d.A,{span:6,children:(0,C.jsxs)("div",{className:"rounded-lg bg-[#F8F8F8] px-4",children:[(0,C.jsxs)("div",{className:"flex h-12 gap-2",children:[(0,C.jsx)(a.A,{}),"My Account"]}),(0,C.jsx)(c.A,{}),(0,C.jsx)("div",{className:"flex h-12 cursor-pointer pl-5 ".concat(1===s&&"text-[#FF9C09]"),onClick:()=>l(1),children:"Profile"}),(0,C.jsx)(c.A,{}),(0,C.jsx)("div",{className:"flex h-12 cursor-pointer pl-5 ".concat(2===s&&"text-[#FF9C09]"),onClick:()=>l(2),children:"Change Password"}),(0,C.jsx)(c.A,{}),(0,C.jsxs)("div",{className:"flex h-12 cursor-pointer gap-2 ",onClick:()=>{m(!0),S.A.logOut().then((s=>{s.isOk&&(localStorage.clear(),e("/"))})).catch((()=>{})).then((()=>m(!1)))},children:[(0,C.jsx)(n.A,{}),"Log out"]})]})}),(0,C.jsx)(d.A,{span:18,children:1===s?(0,C.jsx)(P,{}):(0,C.jsx)(k,{})})]})]})})})}}}]);
//# sourceMappingURL=815.a172486a.chunk.js.map